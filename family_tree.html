<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OC Family Tree (Vis.js)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link href="https://unpkg.com/vis-network/styles/vis-network.min.css" rel="stylesheet"/>
  <style>
    body { margin:0; height:100vh; }
    #mynetwork { width:100%; height:100%; background:#eef2f5; }
  </style>
</head>
<body>

<div id="mynetwork"></div>

<script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
<script>
  // --- Data sets ---
  const nodes = new vis.DataSet();
  const edges = new vis.DataSet();

  // Start with one node
  nodes.add({ id: 1, label: 'Main OC' });

  // --- Create network with manipulation ---
  const container = document.getElementById('mynetwork');
  const data = { nodes, edges };
  const options = {
    physics: false,
    interaction: {
      dragNodes: true,
      dragView: true,
      zoomView: true
    },
    manipulation: {
      enabled: true,

      // Adding a new node
      addNode: function (nodeData, callback) {
        const name = prompt('Character name?', '');
        if (name === null) return;  // cancel
        // You can extend this prompt sequence for age, gender, etc.
        nodeData.label = name;
        callback(nodeData);
      },

      // Editing an existing node
      editNode: function (nodeData, callback) {
        let name = prompt('Name:', nodeData.label.split('\n')[0]);
        if (name === null) return;
        let age  = prompt('Age (leave blank if none):', '');
        let dob  = prompt('Date of Birth (YYYY-MM-DD):', '');
        let dod  = prompt('Date of Death:', '');
        let notes = prompt('Notes (optional):', '');
        // Build multiline label:
        let lines = [name];
        if (age)  lines.push('Age: ' + age);
        if (dob)  lines.push('b. ' + dob);
        if (dod)  lines.push('d. ' + dod);
        if (notes)lines.push(notes);
        nodeData.label = lines.join('\n');
        callback(nodeData);
      },

      // Adding a new edge
      addEdge: function (edgeData, callback) {
        const type = prompt(
          'Edge type? Enter exactly: parent, sibling, partner, affair, or child',
          'child'
        );
        if (!type) return;
        // assign label and style based on type
        edgeData.label = type;
        if (type === 'partner') {
          edgeData.dashes = true;
          edgeData.color = { color: '#333' };
        } else if (type === 'affair') {
          edgeData.dashes = true;
          edgeData.color = { color: '#c00' };
        } else {
          edgeData.dashes = false;
          edgeData.color = { color: '#000' };
        }
        callback(edgeData);
      },

      deleteNode: true,
      deleteEdge: true
    },

    edges: {
      arrows: { to: { enabled: true, type: 'arrow' } },
      smooth: { enabled: true }
    },

    nodes: {
      shape: 'box',
      margin: 10,
      font: { align: 'left' }
    }
  };

  const network = new vis.Network(container, data, options);
</script>
</body>
</html>
